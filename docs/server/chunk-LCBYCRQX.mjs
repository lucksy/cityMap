import './polyfills.server.mjs';
import{A as W,B as x,C as Y,H as U,K as q,M as J,N as Q,O as X,P as tt,Q as et,R as nt,S as it,T as ot,U as at,X as rt,a as j,b as z,ba as ct,c as $,d as b,e as R,f as u,g as f,h as g,i as w,j as Z,k as c,l as M,m as _,n as H,o as C,p as P,q as K,r as B,s as o,t as r,u as p,v as T,w as d,x as l,y as m,z as v}from"./chunk-TTI264G2.mjs";import{e as _t,g as Ct}from"./chunk-5XUXGTUW.mjs";var pt=_t((Zt,lt)=>{"use strict";var st=["","one ","two ","three ","four ","five ","six ","seven ","eight ","nine ","ten ","eleven ","twelve ","thirteen ","fourteen ","fifteen ","sixteen ","seventeen ","eighteen ","nineteen "],ut=["","","twenty","thirty","forty","fifty","sixty","seventy","eighty","ninety"],ft=/^(\d{2})(\d{2})(\d{2})(\d{1})(\d{2})$/,O=n=>st[Number(n)],k=n=>ut[n[0]]+" "+st[n[1]];lt.exports=function(e){let t=Number(e);if(isNaN(t))return"";if(t===0)return"zero";let a=t.toString();if(a.length>9)throw new Error("overflow");let[,i,s,L,A,y]=("000000000"+a).substr(-9).match(ft),h="";return h+=i!=0?(O(i)||k(i))+"crore ":"",h+=s!=0?(O(s)||k(s))+"lakh ":"",h+=L!=0?(O(L)||k(L))+"thousand ":"",h+=A!=0?O(A)+"hundred ":"",h+=y!=0&&h!=""?"and ":"",h+=y!=0?O(y)||k(y):"",h.trim()}});var S=class n{search=new w;onSearch(e){let t=e.target;this.search.emit(t.value)}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=b({type:n,selectors:[["app-search"]],outputs:{search:"search"},standalone:!0,features:[x],decls:7,vars:0,consts:[[1,"search-box"],[1,"search"],["type","text","placeholder","Search city","tabindex","1",3,"input"],[1,"search-icon"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round","width","16","height","16",1,"feather","feather-search"],["cx","11","cy","11","r","8"],["x1","21","y1","21","x2","16.65","y2","16.65"]],template:function(t,a){t&1&&(o(0,"div",0)(1,"div",1)(2,"input",2),d("input",function(s){return a.onSearch(s)}),r(),o(3,"span",3),g(),o(4,"svg",4),p(5,"circle",5)(6,"line",6),r()()()())},styles:[".search-box[_ngcontent-%COMP%]{position:relative;margin:24px 24px 0}.search-box[_ngcontent-%COMP%]   input[type=text][_ngcontent-%COMP%]{padding:8px 12px;border-radius:4px;border:1px solid #eaeaea;font-size:.875rem;color:#333;width:180px;transition:all .2s ease}.search-box[_ngcontent-%COMP%]   input[type=text][_ngcontent-%COMP%]:focus{outline:none;border-color:#407bff;box-shadow:0 0 8px #407bff33}.search-box[_ngcontent-%COMP%]   input[type=text][_ngcontent-%COMP%]::placeholder{color:#b0b0b0}.search[_ngcontent-%COMP%]{position:relative;width:auto}.search[_ngcontent-%COMP%]   .search-icon[_ngcontent-%COMP%]{position:absolute;left:180px;top:55%;transform:translateY(-50%);font-size:16px;color:#b0b0b0}"]})};var I=Ct(pt());var ht=(n,e)=>e.id,bt=n=>({active:n});function xt(n,e){n&1&&(g(),o(0,"svg",11),p(1,"path",12),r())}function Pt(n,e){n&1&&(g(),o(0,"svg",11),p(1,"path",13),r())}function Mt(n,e){if(n&1&&(o(0,"span"),_(1,xt,2,0,":svg:svg",11)(2,Pt,2,0,":svg:svg",11),r()),n&2){let t=l(2);c(),P(t.sortDirection==="asc"?1:2)}}function vt(n,e){n&1&&(g(),o(0,"svg",11),p(1,"path",12),r())}function Ot(n,e){n&1&&(g(),o(0,"svg",11),p(1,"path",13),r())}function yt(n,e){if(n&1&&(o(0,"span"),_(1,vt,2,0,":svg:svg",11)(2,Ot,2,0,":svg:svg",11),r()),n&2){let t=l(2);c(),P(t.sortDirection==="asc"?1:2)}}function wt(n,e){n&1&&(g(),o(0,"svg",11),p(1,"path",12),r())}function Tt(n,e){n&1&&(g(),o(0,"svg",11),p(1,"path",13),r())}function St(n,e){if(n&1&&(o(0,"span"),_(1,wt,2,0,":svg:svg",11)(2,Tt,2,0,":svg:svg",11),r()),n&2){let t=l(2);c(),P(t.sortDirection==="asc"?1:2)}}function Et(n,e){n&1&&(g(),o(0,"svg",11),p(1,"path",12),r())}function kt(n,e){n&1&&(g(),o(0,"svg",11),p(1,"path",13),r())}function It(n,e){if(n&1&&(o(0,"span"),_(1,Et,2,0,":svg:svg",11)(2,kt,2,0,":svg:svg",11),r()),n&2){let t=l(2);c(),P(t.sortDirection==="asc"?1:2)}}function Vt(n,e){if(n&1){let t=T();o(0,"tr",14),d("click",function(){let i=u(t).$implicit,s=l(2);return f(s.selectCity(i.city))})("focus",function(){let i=u(t).$implicit,s=l(2);return f(s.selectCity(i.city))}),o(1,"td",15),m(2),r(),o(3,"td",16),m(4),r(),o(5,"td",16),m(6),r(),o(7,"td",17),m(8),r()()}if(n&2){let t=e.$implicit,a=e.$index,i=l(2);C("ngClass",Y(7,bt,i.selectedCity===t.city)),H("tabindex",a+2)("aria-label",i.getAriaLabel(t)),c(2),v(t.city),c(2),v(t.men),c(2),v(t.women),c(2),v(i.getTotal(t))}}function Ft(n,e){if(n&1){let t=T();o(0,"table",2)(1,"thead")(2,"tr",5)(3,"th",6),d("click",function(){u(t);let i=l();return f(i.sortColumn("city"))}),o(4,"span",7),m(5," City "),_(6,Mt,3,1,"span",8),r()(),o(7,"th",6),d("click",function(){u(t);let i=l();return f(i.sortColumn("men"))}),o(8,"span",7),m(9," Men "),_(10,yt,3,1,"span",8),r()(),o(11,"th",6),d("click",function(){u(t);let i=l();return f(i.sortColumn("women"))}),o(12,"span",7),m(13," Women "),_(14,St,3,1,"span",8),r()(),o(15,"th",9),d("click",function(){u(t);let i=l();return f(i.sortColumn("total"))}),o(16,"span",7),m(17," Total "),_(18,It,3,1,"span",8),r()()()(),o(19,"tbody"),K(20,Vt,9,9,"tr",10,ht),r()()}if(n&2){let t=l();c(6),C("ngIf",t.sortColumnKey==="city"),c(4),C("ngIf",t.sortColumnKey==="men"),c(4),C("ngIf",t.sortColumnKey==="women"),c(4),C("ngIf",t.sortColumnKey==="total"),c(2),B(t.paginatedCities)}}function Dt(n,e){n&1&&(o(0,"div",3),m(1," No results found. "),r())}function Gt(n,e){if(n&1){let t=T();o(0,"section",18)(1,"button",19),d("click",function(){u(t);let i=l();return f(i.previousPage())}),m(2,"Previous"),r(),o(3,"span",20),m(4),r(),o(5,"button",21),d("click",function(){u(t);let i=l();return f(i.nextPage())}),m(6,"Next"),r()()}if(n&2){let t=l();c(),C("disabled",t.currentPage===1),c(3),W("Page ",t.currentPage," of ",t.totalPages,""),c(),C("disabled",t.currentPage===t.totalPages)}}var V=class n{constructor(e,t){this.httpClient=e;this.titleService=t}cities=[];filteredCities=[];paginatedCities=[];currentPage=1;itemsPerPage=5;totalPages=1;selectedCity=null;sortColumnKey="";sortDirection="asc";citySelected=new w;ngOnInit(){this.httpClient.get("https://66cc4211a4dd3c8a71b6ef68.mockapi.io/api/cities").subscribe(e=>{this.cities=e,this.filteredCities=e,this.updatePagination()})}onSearch(e){let t=e.toLowerCase();this.filteredCities=this.cities.filter(a=>a.city.toLowerCase().split(" ").some(i=>i.startsWith(t))),this.currentPage=1,this.updatePagination()}updatePagination(){this.totalPages=Math.ceil(this.filteredCities.length/this.itemsPerPage);let e=(this.currentPage-1)*this.itemsPerPage,t=e+this.itemsPerPage;this.paginatedCities=this.filteredCities.slice(e,t),this.updateTitle()}previousPage(){this.currentPage>1&&(this.currentPage--,this.updatePagination())}nextPage(){this.currentPage<this.totalPages&&(this.currentPage++,this.updatePagination())}updateTitle(){this.titleService.setTitle(`City Map - Page ${this.currentPage} of ${this.totalPages}`)}trackByCityId(e,t){return t.id}getTotal(e){return Number(e.women)+Number(e.men)}selectCity(e){this.selectedCity=e,this.citySelected.emit(e)}sortColumn(e){this.sortColumnKey===e?this.sortDirection=this.sortDirection==="asc"?"desc":"asc":(this.sortColumnKey=e,this.sortDirection="asc"),this.filteredCities.sort((t,a)=>{let i=e==="total"?this.getTotal(t):t[e],s=e==="total"?this.getTotal(a):a[e];return i<s?this.sortDirection==="asc"?-1:1:i>s?this.sortDirection==="asc"?1:-1:0}),this.updatePagination()}getAriaLabel(e){let t=(0,I.default)(e.men),a=(0,I.default)(e.women),i=(0,I.default)(this.getTotal(e));return`${e.city} City row, ${t} men, ${a} women, total ${i}`}static \u0275fac=function(t){return new(t||n)(M(et),M(ot))};static \u0275cmp=b({type:n,selectors:[["app-table"]],outputs:{citySelected:"citySelected"},standalone:!0,features:[x],decls:6,vars:2,consts:[[3,"search"],[1,"table-container"],["role","table","aria-label","City Population Table",1,"table"],[1,"no-results"],["class","pagination","role","navigation","aria-label","Pagination Navigation",4,"ngIf"],["role","row"],["role","columnheader",3,"click"],[1,"sort"],[4,"ngIf"],["role","columnheader",2,"text-align","right",3,"click"],["role","row",3,"ngClass"],["width","16","height","16","viewBox","0 0 24 24"],["d","M7 14l5-5 5 5z"],["d","M7 10l5 5 5-5z"],["role","row",3,"click","focus","ngClass"],["role","cell",2,"width","40%"],["role","cell",2,"width","20%"],["role","cell",2,"width","20%","text-align","right"],["role","navigation","aria-label","Pagination Navigation",1,"pagination"],["aria-label","Previous Page",3,"click","disabled"],["aria-live","polite"],["aria-label","Next Page",3,"click","disabled"]],template:function(t,a){t&1&&(o(0,"div")(1,"app-search",0),d("search",function(s){return a.onSearch(s)}),r(),o(2,"div",1),_(3,Ft,22,4,"table",2)(4,Dt,2,0,"div",3),r(),_(5,Gt,7,4,"section",4),r()),t&2&&(c(3),P(a.paginatedCities.length>0?3:4),c(2),C("ngIf",a.totalPages>1))},dependencies:[nt,X,J,Q,S],styles:['.table-container[_ngcontent-%COMP%]{padding:24px}.table-container[_ngcontent-%COMP%]   .table-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:16px 24px;background-color:#fff;border-radius:8px;margin-bottom:16px}.table-container[_ngcontent-%COMP%]   .table-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:600;color:#333}.table-container[_ngcontent-%COMP%]   .table-header[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:#407bff;color:#fff;padding:8px 16px;border-radius:8px;border:none;font-size:.875rem;font-weight:500;cursor:pointer}.table-container[_ngcontent-%COMP%]   .table-header[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#2769ff}.table-container[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}.table-container[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:16px;text-align:left;color:#333;font-size:.875rem;font-weight:600;border-bottom:2px solid #F4F2F3}.table-container[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]   .sort[_ngcontent-%COMP%], .table-container[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:flex;align-items:center}.table-container[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]   .sort[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%], .table-container[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{margin-right:4px}.table-container[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:last-child{text-align:right}.table-container[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:last-child   .sort[_ngcontent-%COMP%]{justify-content:flex-end}.table-container[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{background-color:#fff;transition:box-shadow .2s ease,transform .2s ease;position:relative}.table-container[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{box-shadow:0 4px 8px #0000001a,0 6px 16px #0000001a;transform:translateY(-1px);cursor:pointer}.table-container[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:active{box-shadow:0 4px 8px #0000001a,0 6px 16px #0000001a;transform:translateY(-1px)}.table-container[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:16px;font-size:.875rem;color:#333;border-bottom:2px solid #F4F2F3;vertical-align:middle;position:relative}.table-container[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:first-child{border-top-left-radius:4px;border-bottom-left-radius:4px}.table-container[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:last-child{border-top-right-radius:4px;border-bottom-right-radius:4px}.table-container[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr.active[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:first-child:before{content:"";position:absolute;top:0;left:0;height:100%;width:2px;background-color:#407bff;border-top-left-radius:4px;border-bottom-left-radius:4px}.pagination[_ngcontent-%COMP%]{display:flex;justify-content:left;align-items:center;margin-left:24px}.pagination[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:#007bff;color:#fff;border:none;padding:8px 20px;margin:0;cursor:pointer;border-radius:4px;transition:background-color .3s ease}.pagination[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled{background-color:#ccc;cursor:not-allowed}.pagination[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover:not(:disabled){background-color:#0056b3}.pagination[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin:0 10px;font-size:1rem;color:#333}.no-results[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;text-align:left;height:100%;font-size:1.25rem;color:#333}']})};var F=class n{constructor(e){this.platformId=e}apiKey="AIzaSyC8KmO08TsCnkTkRChVZK_URaflWTAk_uE";scriptLoadingPromise=null;loadGoogleMaps(){return new j(e=>{if(!tt(this.platformId)){e.error("Not running in a browser environment");return}if(this.scriptLoadingPromise){this.scriptLoadingPromise.then(()=>{e.next(),e.complete()}).catch(t=>{e.error(t)});return}this.scriptLoadingPromise=new Promise((t,a)=>{let i=document.createElement("script");i.src=`https://maps.googleapis.com/maps/api/js?key=${this.apiKey}`,i.onload=()=>{t()},i.onerror=s=>{a("Could not load Google Maps script")},document.head.appendChild(i)}),this.scriptLoadingPromise.then(()=>{e.next(),e.complete()}).catch(t=>{e.error(t)})})}static \u0275fac=function(t){return new(t||n)($(Z))};static \u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})};var D=class n{constructor(e){this.googleMapsLoader=e}city;map;geocoder;ngOnChanges(e){e.city&&this.city&&this.googleMapsLoader.loadGoogleMaps().subscribe({next:()=>{this.smoothZoomToCity(this.city)},error:t=>{console.error("Failed to load Google Maps:",t)}})}ngOnInit(){this.googleMapsLoader.loadGoogleMaps().subscribe({next:()=>{this.initMap()},error:e=>{console.error("Failed to load Google Maps:",e)}})}initMap(){this.map=new google.maps.Map(document.getElementById("map"),{center:{lat:0,lng:0},zoom:2}),this.geocoder=new google.maps.Geocoder}smoothZoomToCity(e){this.smoothZoom(this.map,2,()=>{this.geocoder.geocode({address:e},(t,a)=>{a==="OK"&&t&&t[0]?(this.map.panTo(t[0].geometry.location),setTimeout(()=>{this.smoothZoom(this.map,10)},1e3)):console.error("Geocode was not successful for the following reason: "+a)})})}smoothZoom(e,t,a){let i=e.getZoom()||2;i!==t?(google.maps.event.addListenerOnce(e,"zoom_changed",()=>{this.smoothZoom(e,t,a)}),setTimeout(()=>{e.setZoom(i+(t>i?1:-1))},10)):a&&a()}static \u0275fac=function(t){return new(t||n)(M(F))};static \u0275cmp=b({type:n,selectors:[["app-map"]],inputs:{city:"city"},standalone:!0,features:[R,x],decls:1,vars:0,consts:[["id","map",2,"height","100%","width","100%"]],template:function(t,a){t&1&&p(0,"div",0)}})};var G=class n{title="cityMap";selectedCity="";onCitySelected(e){this.selectedCity=e}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=b({type:n,selectors:[["app-root"]],standalone:!0,features:[x],decls:9,vars:1,consts:[[1,"wrap"],[1,"container"],[3,"citySelected"],[3,"city"]],template:function(t,a){t&1&&(o(0,"div",0)(1,"header")(2,"h1"),m(3,"City Map"),r()(),o(4,"section",1)(5,"div")(6,"app-table",2),d("citySelected",function(s){return a.onCitySelected(s)}),r()(),o(7,"div"),p(8,"app-map",3),r()()()),t&2&&(c(8),C("city",a.selectedCity))},dependencies:[V,D],styles:[".wrap[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;height:100%;width:100%}.container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:start;background-color:#f4f2f3;height:80vh;width:80vw;border-radius:5px}.container[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:first-child{flex:0 0 60%}.container[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:last-child{flex:0 0 40%;height:80vh}@media (max-width: 768px){.container[_ngcontent-%COMP%]{flex-direction:column;height:auto;width:100vw;align-items:center}.container[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:first-child, .container[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:last-child{flex:0 0 auto;width:100%;height:auto}.container[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:last-child{flex:0 0 auto;width:100%;height:200px}.container[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:last-child{margin-top:20px}}"]})};var mt=[];var dt={providers:[U({eventCoalescing:!0}),ct(mt),at()]};var Nt={providers:[rt()]},gt=q(dt,Nt);var At=()=>it(G,gt),Te=At;export{Te as a};
